load("@rules_java//java:defs.bzl", "java_library", "java_plugin")

java_library(
    name = "expect_lib",
    srcs = ["ExpectAnnotationProcessor.java"],
    deps = [
        "//rule/expect_actual_tools/api",
        "//rule/expect_actual_tools/processor/java/util",
        "//rule/expect_actual_tools/processor/lib",
        "@maven//:com_fasterxml_jackson_core_jackson_annotations",
        "@maven//:com_fasterxml_jackson_core_jackson_core",
        "@maven//:com_fasterxml_jackson_core_jackson_databind",
        "@maven//:com_palantir_javapoet_javapoet",
    ],
)

java_plugin(
    name = "expect",
    srcs = ["ExpectAnnotationProcessor.java"],
    generates_api = True,
    processor_class = "top.fifthlight.mergetools.processor.java.expect.ExpectAnnotationProcessor",
    visibility = ["//visibility:public"],
    deps = [
        "//rule/expect_actual_tools/api",
        "//rule/expect_actual_tools/processor/java/util",
        "//rule/expect_actual_tools/processor/lib",
        "@maven//:com_fasterxml_jackson_core_jackson_annotations",
        "@maven//:com_fasterxml_jackson_core_jackson_core",
        "@maven//:com_fasterxml_jackson_core_jackson_databind",
        "@maven//:com_palantir_javapoet_javapoet",
    ],
)
