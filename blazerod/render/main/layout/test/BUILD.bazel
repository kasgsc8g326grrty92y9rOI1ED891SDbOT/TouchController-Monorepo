load("//rule:junit_test.bzl", "kt_junit_test")

kt_junit_test(
    name = "std140_test",
    srcs = ["Std140Test.kt"],
    jvm_flags = [
        # Unsafe cause strange crashes in this test
        "-Djoml.nounsafe=true",
    ],
    test_class = "top.fifthlight.blazerod.layout.test.Std140Test",
    deps = [
        "//blazerod/render/main/layout",
        "@maven//:it_unimi_dsi_fastutil",
        "@maven//:org_jetbrains_kotlin_kotlin_test",
        "@maven//:org_joml_joml",
    ],
)

kt_junit_test(
    name = "std430_test",
    srcs = ["Std430Test.kt"],
    jvm_flags = [
        # Unsafe cause strange crashes in this test
        "-Djoml.nounsafe=true",
    ],
    test_class = "top.fifthlight.blazerod.layout.test.Std430Test",
    deps = [
        "//blazerod/render/main/layout",
        "@maven//:it_unimi_dsi_fastutil",
        "@maven//:org_jetbrains_kotlin_kotlin_test",
        "@maven//:org_joml_joml",
    ],
)

test_suite(
    name = "test",
    tests = [
        ":std140_test",
        ":std430_test",
    ],
    visibility = ["//blazerod/render/main/layout:__pkg__"],
)
