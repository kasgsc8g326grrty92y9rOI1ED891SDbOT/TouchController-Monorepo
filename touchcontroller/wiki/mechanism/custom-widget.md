# TouchController 中的自定义控件

## 介绍

TouchController 几乎所有的控件都是基于同一个自定义架构实现的，这也表明了TouchController 的自定义控件拥有的极高自由度。在[自定义控件布局](../gui/config-screen/sub-pages/layout/custom-widget-layout.md)中的[控件](../gui/config-screen/sub-pages/layout/custom-widget-layout.md#控件)标签页中，有一个“内置控件”和一个“模板控件”。您可以在“内置控件”中添加控件，在此基础上修改后保存到“模板控件”中，然后在其他页面中使用，下文将详细的描述自定义控件的方法。

## 机制

### 外观

您一共可以为一个控件配置两种外观，分别是正常状态下和激活状态下，您也可以选择激活后不改变贴图或贴图变灰。特别地，文本和文本颜色的配置不能随着控件的激活状态而改变。除此之外，以下几种属性都可以随着控件的激活状态而改变：

- 填充：在这个模式下，您可以使用颜色填充控件，也可以为其设置边框：边框宽度和边框颜色。这个模式下的控件大小会随着文本长度而改变，您可以为文本设置边距：上、下、左、右。
- 固定贴图：在这个模式下，您可以将控件设置为 TouchController 所拥有的任何控件贴图（~~甚至包括摇杆手柄和摇杆背景~~）。在此模式下，您还可以调整控件缩放，最高为400%。
- 自适应贴图：在这个模式下，您可以选择一些控件的背景作为自定义控件的背景。这个模式下的控件大小会随着文本长度而改变，您可以为文本设置边距：上、下、左、右。

### 操作

#### 动作

大部分操作都可以有四种选择：无、键位、玩家操作、游戏操作。

- 无：不做任何操作
- 键位：执行 Minecraft “按键绑定”中某个条目的操作，但并非发送键值。在此模式下可以选择触发后锁定，锁定后相当于持续激活这个键位。锁定类型有三种：开始、停止、和反转。顾名思义，“开始”就是触发操作后开始锁定这个控件；“停止”就是触发操作后停止锁定这个控件；“反转”就是触发操作后反转锁定状态。当然，您也可以选择不锁定，此时可以使用一个选项“保持一个客户端刻”，如果遇到某些时候操作按键无效，请启用这个选项。
- 玩家操作：触发玩家的某个操作：如停止飞行、开始疾跑、停止疾跑
- 游戏操作：触发某个游戏操作：如打开游戏菜单、打开聊天界面等
- 图层条件：切换、启用、禁用某[自定义图层条件](./custom-conditions)

#### 触发

- 按压：手指按下控件的瞬间触发，这个操作可以有上述四种选择。
- 按下：手指按下控件后持续触发，这个操作只能绑定键位（具体见上）。
- 松开：手指按下控件后松开的瞬间触发，这个操作可以有上述四种选择。
- 双击：手指双击控件后的瞬间触发，并且可以设置两次点击控件的判定间隔，这个操作可以有上述四种选择。
